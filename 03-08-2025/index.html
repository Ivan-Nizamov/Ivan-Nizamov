<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Personal Website | Welcome</title>

  <!-- Fonts & Libraries -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@200..800&display=swap" rel="stylesheet" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

  <style>
    :root { --accent: #2ad6ff; }

    html, body { height: 100%; }
    body {
      margin: 0;
      background: #1b3565;
      color: #fdfcff;
      display: grid;
      place-items: center;
      min-height: 100svh;
      overflow-x: hidden;
      font-family: "Manrope", system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      /* respect notches/safe areas on mobile */
      padding: max(0.75rem, env(safe-area-inset-top)) max(0.75rem, env(safe-area-inset-right))
               max(0.75rem, env(safe-area-inset-bottom)) max(0.75rem, env(safe-area-inset-left));
    }

    /* Background */
    #letter-glitch-bg {
      position: fixed; inset: 0; z-index: -1; overflow: hidden; background: #1b3565;
    }
    #glitch-canvas { width: 100%; height: 100%; display: block; opacity: 0.6; filter: blur(0.8px); }
    .center-vignette { position: absolute; inset: 0; pointer-events: none;
      background: radial-gradient(rgba(253, 252, 255, 0) 0%, rgba(27, 53, 101, 0.9) 70%);
    }

    .content-container {
      display: flex; flex-direction: column; align-items: center; justify-content: center;
      text-align: center; gap: 1rem;
      width: 100%; max-width: 44rem;
      padding: 2rem 1.25rem;
      background: rgba(27,53,101,0.45); backdrop-filter: blur(10px);
      border-radius: 1rem; border: 1px solid rgba(55,115,237,0.2);
    }

    /* Headings */
    .welcome-text, .subtitle {
      margin: 0;
      font-weight: 800;
      line-height: 1.15;
      color: var(--accent);
      opacity: 0; visibility: hidden; /* revealed by JS */
      /* Better mobile line breaks */
      text-wrap: balance;            /* modern browsers */
      word-break: normal;
      overflow-wrap: normal;
      hyphens: auto;
      letter-spacing: -0.01em;
    }
    .welcome-text { font-size: clamp(1.4rem, 8vw, 3.25rem); }
    .subtitle     { font-weight: 700; font-size: clamp(0.95rem, 4.5vw, 1.25rem); margin-top: .25rem; }

    /* Per-word wrapper created by JS so words don't split mid-word */
    .word { display: inline-block; white-space: nowrap; } /* allows wrapping *between* words only */

    a { text-decoration: none; }

    /* Mobile optimizations */
    @media (max-width: 768px) {
      .content-container { gap: 1.1rem; padding: 1.5rem 1rem; }
      #glitch-canvas { opacity: .5; filter: blur(1px); } /* calmer background on phones */
    }
    @media (max-width: 420px) {
      .content-container { max-width: 98vw; padding: 1.25rem .85rem; }
      .welcome-text { font-size: clamp(1.2rem, 9.5vw, 2.1rem); }
      .subtitle     { font-size: clamp(0.9rem, 4.5vw, 1.1rem); }
    }

    @media (prefers-reduced-motion: reduce) {
      .welcome-text, .subtitle { animation: none; }
    }
  </style>
</head>
<body>
  <div id="letter-glitch-bg" aria-hidden="true">
    <canvas id="glitch-canvas"></canvas>
    <div class="center-vignette"></div>
  </div>

  <div class="content-container">
    <h2 id="welcome-text" class="welcome-text">Welcome to my personal website!</h2>
    <p id="subtitle-text" class="subtitle">⚠️ This site is currently being rewritten... ⚠️</p>

    <div class="flex flex-col gap-0 w-full max-w-sm mx-auto relative z-10">
      <a href="resume.pdf" download>
        <button
          class="group relative w-full p-3 sm:p-4 backdrop-blur-xl border-2 border-[#2ad6ff]/30 bg-gradient-to-br from-[#3773ed]/20 via-[#1b3565]/60 to-[#1b3565]/80 shadow-2xl hover:shadow-[#2ad6ff]/30 hover:shadow-2xl hover:scale-[1.02] hover:-translate-y-1 active:scale-95 transition-all duration-500 ease-out cursor-pointer hover:border-[#2ad6ff]/60 overflow-hidden"
          style="border-radius: 1rem;"
          aria-label="Download Resume as PDF"
        >
          <div class="absolute inset-0 bg-gradient-to-r from-transparent via-[#2ad6ff]/30 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000 ease-out"></div>
          <div class="absolute inset-0 bg-gradient-to-r from-[#3773ed]/10 via-[#2ad6ff]/20 to-[#3773ed]/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500" style="border-radius: 1rem;"></div>
          <div class="relative z-10 flex items-center gap-3 sm:gap-4">
            <div class="p-2 sm:p-3 bg-gradient-to-br from-[#2ad6ff]/30 to-[#3773ed]/10 backdrop-blur-sm group-hover:from-[#2ad6ff]/40 group-hover:to-[#3773ed]/20 transition-all duration-300" style="border-radius: 1rem;">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                   class="w-6 h-6 sm:w-7 sm:h-7 fill-current text-[#2ad6ff] group-hover:text-[#fdfcff] transition-all duration-300 group-hover:scale-110 drop-shadow-lg"
                   role="img" aria-hidden="true">
                <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M12 15V3m0 12l-4-4m4 4l4-4M2 17l.621 2.485A2 2 0 0 0 4.561 21h14.878a2 2 0 0 0 1.94-1.515L22 17"></path>
              </svg>
            </div>
            <div class="flex-1 text-left">
              <p class="text-[#2ad6ff] font-bold text-base sm:text-lg group-hover:text-[#fdfcff] transition-colors duration-300 drop-shadow-sm">
                Resume
              </p>
              <p class="text-[#2ad6ff]/60 text-xs sm:text-sm group-hover:text-[#fdfcff]/80 transition-colors duration-300">
                Download PDF
              </p>
            </div>
            <div class="opacity-40 group-hover:opacity-100 group-hover:translate-x-1 transition-all duration-300">
              <svg viewBox="0 0 24 24" stroke="currentColor" fill="none" class="w-4 h-4 sm:w-5 sm:h-5 text-[#2ad6ff]" aria-hidden="true">
                <path d="M9 5l7 7-7 7" stroke-width="2" stroke-linejoin="round" stroke-linecap="round"></path>
              </svg>
            </div>
          </div>
        </button>
      </a>
    </div>
  </div>

  <script>
    /* ---------- Animated letter-glitch background ---------- */
    class LetterGlitch {
      constructor(canvas, options = {}) {
        this.canvas = canvas;
        this.ctx = canvas.getContext("2d");
        this.glitchColors = options.glitchColors || ["#3773ed", "#1b3565", "#2ad6ff"];
        this.glitchSpeed = options.glitchSpeed || 100;
        this.smooth = options.smooth ?? false;

        this.fontSize = 24;
        this.charWidth = 26;
        this.charHeight = 36;

        this.letters = [];
        this.grid = { columns: 0, rows: 0 };
        this.lastGlitchTime = Date.now();
        this.animationId = null;
        this.drawW = 0;
        this.drawH = 0;

        this.lettersAndSymbols = [
          ..."ABCDEFGHIJKLMNOPQRSTUVWXYZ",
          ..."!@#$&*()-_+=/[]{};:<>,".split(""),
          ..."0123456789",
        ];
        this.init();
      }
      getRandomChar() { return this.lettersAndSymbols[Math.floor(Math.random() * this.lettersAndSymbols.length)]; }
      getRandomColor() { return this.glitchColors[Math.floor(Math.random() * this.glitchColors.length)]; }
      calculateGrid(w, h) { return { columns: Math.ceil(w / this.charWidth) + 2, rows: Math.ceil(h / this.charHeight) + 2 }; }
      initializeLetters(c, r) {
        this.grid = { columns: c, rows: r };
        this.letters = Array.from({ length: c * r }, () => ({ char: this.getRandomChar(), color: this.getRandomColor() }));
      }
      resizeCanvas() {
        const parent = this.canvas.parentElement; if (!parent) return;
        const dpr = window.devicePixelRatio || 1;
        const rect = parent.getBoundingClientRect();
        this.drawW = Math.floor(rect.width); this.drawH = Math.floor(rect.height);
        this.canvas.width = this.drawW * dpr; this.canvas.height = this.drawH * dpr;
        this.canvas.style.width = `${this.drawW}px`; this.canvas.style.height = `${this.drawH}px`;
        this.ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
        const { columns, rows } = this.calculateGrid(this.drawW, this.drawH);
        this.initializeLetters(columns, rows); this.drawLetters();
      }
      drawLetters() {
        if (!this.ctx || !this.letters.length) return;
        this.ctx.clearRect(0, 0, this.drawW, this.drawH);
        this.ctx.font = `${this.fontSize}px ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace`;
        this.ctx.textBaseline = "top";
        this.letters.forEach((cell, i) => {
          const col = i % this.grid.columns;
          const row = Math.floor(i / this.grid.columns);
          const x = (col - 1) * this.charWidth;
          const y = (row - 1) * this.charHeight;
          this.ctx.fillStyle = cell.color;
          this.ctx.fillText(cell.char, x, y);
        });
      }
      updateLetters() {
        if (!this.letters.length) return;
        const n = Math.max(1, Math.floor(this.letters.length * 0.01));
        for (let i = 0; i < n; i++) {
          const idx = Math.floor(Math.random() * this.letters.length);
          const cell = this.letters[idx];
          cell.char = this.getRandomChar();
          cell.color = this.getRandomColor();
        }
      }
      animate() {
        const now = Date.now();
        if (now - this.lastGlitchTime >= this.glitchSpeed) {
          this.updateLetters(); this.drawLetters(); this.lastGlitchTime = now;
        }
        this.animationId = requestAnimationFrame(() => this.animate());
      }
      init() {
        this.resizeCanvas(); this.animate();
        let t;
        const onResize = () => {
          clearTimeout(t);
          t = setTimeout(() => {
            cancelAnimationFrame(this.animationId);
            this.resizeCanvas(); this.animate();
          }, 120);
        };
        window.addEventListener("resize", onResize);
        this.onResize = onResize;
      }
      destroy() { if (this.animationId) cancelAnimationFrame(this.animationId); window.removeEventListener("resize", this.onResize); }
    }

    /* ---------- Character animation without breaking words ---------- */
    class SplitTextAnimation {
      constructor(element, options = {}) {
        this.element = element;
        this.text = options.text || element.textContent;
        this.delay = options.delay || 50;
        this.duration = options.duration || 0.6;
        this.ease = options.ease || "power3.out";
        this.from = options.from || { opacity: 0, y: 40 };
        this.to = options.to || { opacity: 1, y: 0 };
        this.onComplete = options.onComplete;
        this.chars = [];
        this.timeline = null;
        this.init();
      }
      /* Wrap each *word* in a container; animate chars inside it */
      splitText() {
        const t = this.text;
        this.element.innerHTML = "";
        this.element.style.opacity = "1";
        this.element.style.visibility = "visible";

        const frag = document.createDocumentFragment();
        const tokens = t.split(/(\s+)/); // keep spaces as tokens

        tokens.forEach(token => {
          if (token.trim() === "") {
            // Preserve spaces/newlines
            frag.appendChild(document.createTextNode(token));
          } else {
            // Word wrapper prevents mid-word breaks
            const word = document.createElement("span");
            word.className = "word";
            word.style.display = "inline-block";
            word.style.whiteSpace = "nowrap";

            for (let i = 0; i < token.length; i++) {
              const span = document.createElement("span");
              span.textContent = token[i];
              span.style.display = "inline-block";
              span.style.willChange = "transform, opacity";
              gsap.set(span, this.from);
              this.chars.push(span);
              word.appendChild(span);
            }
            frag.appendChild(word);
          }
        });

        this.element.appendChild(frag);
      }
      animate() {
        if (!this.chars.length) return;
        this.timeline = gsap.timeline({
          onComplete: () => {
            this.chars.forEach(c => (c.style.willChange = "auto"));
            if (this.onComplete) this.onComplete();
          },
        });
        this.timeline.to(this.chars, {
          ...this.to,
          duration: this.duration,
          ease: this.ease,
          stagger: this.delay / 1000,
          force3D: true,
        });
      }
      init() { this.splitText(); this.animate(); }
      destroy() { if (this.timeline) this.timeline.kill(); }
    }

    document.addEventListener("DOMContentLoaded", () => {
      const canvas = document.getElementById("glitch-canvas");
      if (canvas && !window.matchMedia("(prefers-reduced-motion: reduce)").matches) {
        new LetterGlitch(canvas, { glitchSpeed: 400, smooth: false });
      }

      const welcomeText = document.getElementById("welcome-text");
      const subtitleText = document.getElementById("subtitle-text");

      setTimeout(() => {
        new SplitTextAnimation(welcomeText, {
          delay: 40, duration: 0.6, ease: "power3.out",
          from: { opacity: 0, y: 60, rotationX: -90 },
          to:   { opacity: 1, y: 0,  rotationX: 0 }
        });
      }, 300);

      setTimeout(() => {
        new SplitTextAnimation(subtitleText, {
          delay: 25, duration: 0.5, ease: "power2.out",
          from: { opacity: 0, y: 40, scale: 0.92 },
          to:   { opacity: 1, y: 0,  scale: 1 }
        });
      }, 650);
    });
  </script>
</body>
</html>
